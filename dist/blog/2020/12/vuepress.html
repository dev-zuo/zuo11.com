
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <meta name="application name" content="vuepress.html">
        <meta name="author" content="guoqzuo">
        <meta name="description" content="VuePress 是一个静态网站生成器，诞生初衷是为了支持 Vue 及其子项目的文档需求。目前 Vue 相关文档都是由 vuepress 搭建。相比其他静态站点生成工具，Docsify 是运行时驱动，通过 JS 加载内容，对 SEO 不够友好。VuePress 类似于 Hexo，主要区别是 VuePress 是由 Vue 驱动。">
        <meta name="keywords" content="VuePress,VuePress 创建网站,vuepress 使用">

        <title>使用 VuePress 生成静态网站并部署到 Github Pages - 左小白的技术日常</title>
        <link rel="shortcut icon" href="/images/favicon.ico">
        <link href="/lib/prismjs/prism_default.css" rel="stylesheet" />
        <link href="/lib/notes.css" rel="stylesheet" />
        <link rel="stylesheet" href="/lib/global.css">
        
      </head>
      <body>
        <header>
          <div>
            <img src="/images/logo.png" width="24" height="24" class="pointer" onclick="gotoIndex()" />
            <span class="pointer" onclick="gotoIndex()">左小白的技术日常</span>
            <span class="hidden"> | </span>
            <a href="/blog/category.html#vue" class="hidden">Vue</a>
          </div>
          <div>
            
          <a href="http://fe.zuo11.com" target="_black" class="hidden">我的笔记</a>
        
          <a href="https://github.com/zuoxiaobai" target="_black" class="">Github</a>
        
          </div>
        </header>
        <section class="content">
          <article>
            <h1 id="使用vuepress生成静态网站并部署到github-pages">使用VuePress生成静态网站并部署到Github Pages</h1>
            
    <div class="article-top">
      <div class="flex">
        这篇文章发布于 2020/12/15，归类于 <a href="/blog/category.html#vue" class="hidden">Vue</a>
        <!-- ，阅读 11 次，今日 1 次 <div class="top-comment">4 条评论</div> -->
        <div id="readAndComment" class="flex"></div>
      </div> 
      <div class="flex keywords" style="flex-wrap: nowrap;">
        <div style="flex-shrink:0; align-self: flex-start;">标签：</div>
        <div class="flex" style="flex-wrap: wrap;"><span>VuePress</span>，<span>VuePress 创建网站</span>，<span>vuepress 使用</span></div>
      </div>
    </div>
    
  
            
<p><a href="https://www.vuepress.cn/guide/#%E5%AE%83%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84">VuePress</a> 是一个静态网站生成器，诞生初衷是为了支持 Vue 及其子项目的文档需求。目前 Vue 相关文档都是由 vuepress 搭建。相比其他静态站点生成工具，Docsify 是运行时驱动，通过 JS 加载内容，对 SEO 不够友好。VuePress 类似于 Hexo，主要区别是 VuePress 是由 Vue 驱动的。</p>
<p>VuePress 的比较好的地方：</p>
<ol>
<li>丰富的 Markdown 扩展、主题风格优雅</li>
<li>可以使用插件支持 PWA</li>
<li>支持 vue 组件，SEO 友好</li>
</ol>
<p>现在以 <code>zuoxiaobai/fenote</code> Github 仓库为例，为该仓库搭建一个官网</p>
<p>核心目录结构如下，完整目录结构参考 <a href="https://www.vuepress.cn/guide/directory-structure.html#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">VuePress 目录结构</a></p>
<pre><code class="language-bash">├── docs  # docs 是文档项目名称，也可以自己命名 
│   ├── .vuepress # .vuepress 配置、构件生成目录
│   ├── README.md # 默认的首页
│   ├── 其他markdown目录及文档
└── package.json</code></pre>
<p>它的本质就是，先按照指定的目录格式，写好 Markdown 及配置。然后使用 vuepress dev docs 命令生成静态站点，生成目录默认为 docs/.vuepress/dist。另外它还提供了开发服务器，运行 vuepress dev docs 可以实时看页面效果。</p>
<p>由于需要使用 vuepress 命令，我们为了方便后期维护迭代，一般不推荐全局安装 vuepress。在项目内安装即可。如果项目根目录没有 package.json，那就需要自己创建一个了。</p>
<pre><code class="language-bash"># 初始化一个 package.json，如果这个文件存在，可跳过
npm init   
# 安装 vuepress 开发依赖
npm install vuepress -D # --save-dev</code></pre>
<p>在 package.json 里面添加下面两条命令的快捷方式，这样就可以使用 npm run docs:dev，以及 npm run docs:build 来运行或构件静态站点了。</p>
<pre><code class="language-js">&quot;scripts&quot;: {
  &quot;docs:dev&quot;: &quot;vuepress dev docs&quot;,
  &quot;docs:build&quot;: &quot;vuepress build docs&quot;
},</code></pre>
<p>下面按照上面的目录结构，把 docs、.vuepress文件夹，以及 README.md 创建好，REAMEME.md 写一个 hello vuepress。运行 npm run docs:dev 它默认会在本地开启 8080 端口服务，访问效果如下图</p>
<p><img src="../../../images/blog/vue/vuepress_1.png" alt="vuepress_1.png"></p>
<p>可以看到标题、右上角导航栏、左侧菜单都没有出来。这就需要在 .vuepress/confing.js 写对应的配置了。你需要关系 4 点：</p>
<ol>
<li>title 用于配置左上角标题</li>
<li>themeConfig.sidebar 用于配置右上角的导航栏</li>
<li>themeConfig.nav 用于配置左侧菜单</li>
<li>首页默认是 docs/README.md，<code>/</code> 表示 docs 目录，比如：<code>/a.md</code> 表示 <code>dosc/a.md</code></li>
</ol>
<pre><code class="language-js">// .vuepress/config.js
module.exports = {
  // base: &#39;/fenote/&#39;,
  title: &#39;左小白的前端笔记&#39;,
  description: &#39;左小白的前端笔记，用于记录、完善个人前端知识体系结构&#39;,
  themeConfig: {
    sidebar: [
      {
        title: &#39;指南&#39;,
        children: [
          &#39;/&#39;,
          &#39;/a.md&#39;,
          &#39;/b.md&#39;
        ]
      }
    ],
    nav: [
      { text: &#39;指南&#39;, link: &#39;/&#39; },
      { text: &#39;配置&#39;, link: &#39;/config.md&#39; },
      { text: &#39;Github&#39;, link: &#39;https://www.github.com/zuoxiaobai/fenote&#39; }
    ]
  }
}</code></pre>
<p>我们按照上面的配置文件写好后，在 docs 目录下创建 a.md，b.md，a.md 如下</p>
<pre><code class="language-markdown"># a文件

a.md</code></pre>
<p>由于 npm run build:dev 后，它支持类似 HMR 热模块加载的功能，修改后，会自动重新构建。根据上面的配置好后，效果如下</p>
<p><img src="../../../images/blog/vue/vuepress_2.png" alt="vuepress_2.png"></p>
<p>这样我们就可以根据自己的需要，规划顶部导航以及左侧菜单了。更多配置、markdown扩展语法参见：<a href="https://www.vuepress.cn/guide/basic-config.html#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">基本配置 | VuePress</a></p>
<p>这样写好后，只能本地运行，怎么部署到 Github Pages 呢？VuePress官网提供一个部署脚本，可以放到项目根目录 deploy.sh</p>
<pre><code class="language-bash">#!/usr/bin/env sh

# 确保脚本抛出遇到的错误
set -e

# 生成静态文件
npm run docs:build

# 进入生成的文件夹
cd docs/.vuepress/dist

# 如果是发布到自定义域名
# echo &#39;www.example.com&#39; &gt; CNAME

# 在新生成的目录下初始化 .git，并 add 所有文件，提交到该目录下项目的本地master分支(默认)
git init
git add -A
git commit -m &#39;deploy&#39;

# 如果发布到 https://&lt;USERNAME&gt;.github.io
# git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git master

# 如果发布到 https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;
# git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git master:gh-pages
# zuoxiaobai/fenote 对应的配置如下，将doscs/.vuepress/dist 目录下的 master 分支 push 到 fenote 远程远程仓库的 gh-pages 分支
git push -f git@github.com:zuoxiaobai/fenote.git master:gh-pages

cd -</code></pre>
<p>在 mac 下，新建的 deploy.sh 默认没有可执行权限，需要 <code>chmod +x deploy.sh</code>，这样就可以 ./deploy.sh 直接部署了。</p>
<p>注意：如果发布到 <code>https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;</code>，且没有使用自定义域名。则需要修改 config.js 的 base 配置为对应的仓库名</p>
<pre><code class="language-js">module.exports = {
  base: &#39;/fenote/&#39;, 
  title: &#39;左小白的前端笔记&#39;,
  // ...
}</code></pre>
<p>运行 ./deploy.sh，部署成功后，可以通过 <code>https://zuoxiaobai.github.io/fenote/</code> 来访问了，如下图</p>
<p><img src="../../../images/blog/vue/vuepress_3.png" alt="vuepress_3.png"></p>
<p><strong>注意：目前由于部署到了 <code>fe.zuo11.com</code> 二级域名上，<code>github.io</code> 的链接已无法访问</strong></p>

            
            <ins class='adsbygoogle' style='display:block;margin-top:1em;margin-bottom:0' data-ad-format='fluid' data-ad-layout-key='-gw-3+1f-3d+2z' data-ad-client='ca-pub-9527676606416641' data-ad-slot='8870245163'></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
            <!-- 评论系统占位 -->
            <div id="commentDiv"></div>
          </article>

          <aside>
            <div class="aside-wrap">
              <div class="top ">
                <ul><li><span class="ul-span" data-id="使用vuepress生成静态网站并部署到github-pages" style="padding-left:1em">使用VuePress生成静态网站并部署到Github Pages<span></li></ul>
              </div>
              <ins class='adsbygoogle' style='display:block;width:300px;height:250px;' data-ad-client='ca-pub-9527676606416641' data-ad-slot='9476232907'></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
            </div>
          </aside>
        </section>
        <footer>
          <div class="footer_content">
            <div class="footer_right">Copyright © 2016-2020 zuo11.com. <a href='http://beian.miit.gov.cn/'>鄂ICP备16014741号-1</a></div>
            <div>Powered by <a href='https://github.com/zuoxiaobai/zuo-blog' target='_black'>zuo-blog</a></div>
          </div>
        </footer>
        <script src="/lib/prismjs/prism_default.js"></script>
        <script src="/lib/notes.js"></script> 
        <script src="/lib/global.js"></script>
        <script>
          
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?183281668cc3440449274d1f93c04de6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-178732583-1"></script> -->
<script>
  // window.dataLayer = window.dataLayer || [];
  // function gtag(){dataLayer.push(arguments);}
  // gtag('js', new Date());
  // gtag('config', 'UA-178732583-1');

  window.onload = function() {
    setTimeout(function() {
      let script = document.createElement("script");
      script.setAttribute("data-ad-client", "ca-pub-9527676606416641");
      script.setAttribute("async", "");
      script.src = "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";
      document.body.appendChild(script);
    }, 200);
  }
</script>

      </body>
    </html>
  