
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <meta name="application name" content="vue_tabs_pit.html">
        <meta name="author" content="guoqzuo">
        <meta name="description" content="vue tabs标签页,vue 标签页,vue便签页的坑，最近项目中需要在一个页面中打开多个tab标签页，刚才是觉得element有现成的组件，觉得没啥问题，后面发现迭代维护新功能时真的是大坑。个人建议**能不使用tab标签页的情况，就不要使用**，下面来看看需要注意的地方">
        <meta name="keywords" content="vue tabs标签页,vue 标签页,vue便签页的坑">

        <title>vue tabs标签页组件的坑，能不使用就不要使用 - 左小白的技术日常</title>
        <link rel="shortcut icon" href="/images/favicon.ico">
        <link href="/lib/prismjs/prism_default.css" rel="stylesheet" />
        <link href="/lib/notes.css" rel="stylesheet" />
        <link rel="stylesheet" href="/lib/global.css">
        <script data-ad-client="ca-pub-9527676606416641" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      </head>
      <body>
        <header>
          <div>
            <img src="/images/logo.png" width="24" height="24" class="pointer" onclick="gotoIndex()" />
            <span class="pointer" onclick="gotoIndex()">左小白的技术日常</span>
            <span class="hidden"> | </span>
            <a href="/blog/category.html#vue" class="hidden">vue</a>
          </div>
          <div>
            
          <a href="https://www.yuque.com/guoqzuo" target="_black" class="hidden">语雀</a>
        
          <a href="https://space.bilibili.com/486840111" target="_black" class="hidden">B站</a>
        
          <a href="https://github.com/zuoxiaobai" target="_black" class="">Github</a>
        
          </div>
        </header>
        <section class="content">
          <article>
            
    <div class="article-top">
      <div>2020/08/22</div> 
      <div class="article-top-right">Author: guoqzuo</div>
    </div>
  
            <h1 id="vue-tabs标签页组件的坑，能不使用就不要使用">vue tabs标签页组件的坑，能不使用就不要使用</h1>
<p>最近项目中需要在一个页面中打开多个tab标签页，刚才是觉得element有现成的组件，觉得没啥问题，后面发现迭代维护新功能时真的是大坑。</p>
<p>个人建议<strong>能不使用tab标签页的情况，就不要使用</strong>，下面来看看需要注意的地方</p>
<p><img src="../../../images/blog/vue/vue_tabs_pit.png" alt="vue_tabs_pit.png"></p>
<h2 id="不要使用el-tab-pane插槽">不要使用el-tab-pane插槽</h2>
<p>不要使用el-tabs里面el-tab-pane的插槽，如果是多个组件切换或加keep-alive钩子函数逻辑会比较怪，建议el-tabs只用来做顶部tab，内容切换自己控制，不要使用 el-tab-pane插槽写法</p>
<pre><code class="language-html">&lt;el-tabs v-model=&quot;activeName&quot; @tab-click=&quot;handleClick&quot;&gt;
    &lt;el-tab-pane label=&quot;用户管理&quot; name=&quot;first&quot;&gt;用户管理&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;配置管理&quot; name=&quot;second&quot;&gt;配置管理&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;角色管理&quot; name=&quot;third&quot;&gt;角色管理&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;定时任务补偿&quot; name=&quot;fourth&quot;&gt;定时任务补偿&lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;

&lt;!-- 分开 --&gt;
&lt;el-tabs v-model=&quot;activeName&quot; @tab-click=&quot;handleClick&quot;&gt;
    &lt;el-tab-pane label=&quot;用户管理&quot; name=&quot;first&quot;&gt;&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;配置管理&quot; name=&quot;second&quot;&gt;&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;角色管理&quot; name=&quot;third&quot;&gt;&lt;/el-tab-pane&gt;
    &lt;el-tab-pane label=&quot;定时任务补偿&quot; name=&quot;fourth&quot;&gt;&lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
&lt;!-- 使用动态组件切换tab内容--&gt;
&lt;component :is=&quot;activeName&quot;&gt;&lt;/component&gt;</code></pre>
<h2 id="同组件tab切换时使用watch">同组件tab切换时使用watch</h2>
<p>组件打开一次后，created已执行，再打开一个tab时，不会触发created或mounted，<strong>需要用watch监听prop传值的改变进行一些请求接口的初始化操作，如果组件还有子组件，也需要这样做，防止数据不刷新的问题</strong></p>
<h2 id="刷新页面保存已打开tab列表">刷新页面保存已打开tab列表</h2>
<p>当刷新网页时，我们暂时没有保存已打开tabs记录，会回到首页。对于这种情况，如果产品需要就需要考虑了。</p>
<h2 id="同组件tab来回切取消请求问题">同组件tab来回切取消请求问题</h2>
<p>点击一个tab后，如果请求比较慢，再点击另一个tab，数据可能会乱，<strong>注意tab切换时，取消发出的请求</strong></p>
<h2 id="activated与watch同时触发避免多次请求">activated与watch同时触发避免多次请求</h2>
<p>使用keep-alive包裹组件，不同组件切换触发 activated 钩子，如果打开过一个详情页。在列表页再打开一个详情页，会同时触发 watch、activated，需要注意刷新逻辑，防止多次请求，需要用个变量来标记，只执行一次</p>
<h2 id="同组件有表单时，建议只能打开一个">同组件有表单时，建议只能打开一个</h2>
<p>如果修改详情信息可以打开多个，那多个表单的数据肯定会串，很麻烦。最好一次只能打开一个修改页面，打开多个没必要。</p>
<p>综上，看起来简单，其实后面逻辑越加越多时，会变的很不好维护，需要考虑的问题会比较多</p>

          </article>
          <aside>
            <div>
              <ul><li><span class="ul-span" data-id="vue-tabs标签页组件的坑，能不使用就不要使用" style="padding-left:1em">vue tabs标签页组件的坑，能不使用就不要使用<span></li><ul><li><span class="ul-span" data-id="不要使用el-tab-pane插槽" style="padding-left:2em">不要使用el-tab-pane插槽<span></li></ul><ul><li><span class="ul-span" data-id="同组件tab切换时使用watch" style="padding-left:2em">同组件tab切换时使用watch<span></li></ul><ul><li><span class="ul-span" data-id="刷新页面保存已打开tab列表" style="padding-left:2em">刷新页面保存已打开tab列表<span></li></ul><ul><li><span class="ul-span" data-id="同组件tab来回切取消请求问题" style="padding-left:2em">同组件tab来回切取消请求问题<span></li></ul><ul><li><span class="ul-span" data-id="activated与watch同时触发避免多次请求" style="padding-left:2em">activated与watch同时触发避免多次请求<span></li></ul><ul><li><span class="ul-span" data-id="同组件有表单时，建议只能打开一个" style="padding-left:2em">同组件有表单时，建议只能打开一个<span></li></ul></ul>
            <div>
          </aside>
        </section>
        <footer>
          <div class="footer_content">
            <div class="footer_right">Copyright © 2016-2020 zuo11.com. <a href='http://www.beian.miit.gov.cn/'>鄂ICP备16014741号-1</a></div>
            <div>Powered by <a href='https://github.com/zuoxiaobai/zuo-blog' target='_black'>zuo-blog</a></div>
          </div>
        </footer>
        <script src="/lib/prismjs/prism_default.js"></script>
        <script src="/lib/notes.js"></script> 
        <script src="/lib/global.js"></script>
        <script>
          
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?183281668cc3440449274d1f93c04de6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178732583-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178732583-1');
</script>

      </body>
    </html>
  