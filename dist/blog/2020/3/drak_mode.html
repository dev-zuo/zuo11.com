
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <meta name="application name" content="drak_mode.html">
        <meta name="author" content="guoqzuo">
        <meta name="description" content="web dark mode，网页js怎么监听深色模式改变事件，window.matchMedia, (prefers-color-scheme: dark)，目前iOS，macos都有了深色模式，而最近微信最新版也做了深色模式(dark mode)适配，我试了下，手机切换时页面效果样式是实时刷新的。于是就想着web怎么能够监听深色模式，并设置样式。查了资料后，在Stack Overflow上找到了答案，下面来看看">
        <meta name="keywords" content="window.matchMedia, web drak mode event,web dark mode,web深色模式,网页深色模式,网页怎么监听深色模式,(prefers-color-scheme: dark)">

        <title>网页深色模式样式适配(web dark mode support) - 左小白的技术日常</title>
        <link rel="shortcut icon" href="/images/favicon.ico">
        <link href="/lib/prismjs/prism_default.css" rel="stylesheet" />
        <link href="/lib/notes.css" rel="stylesheet" />
        <link rel="stylesheet" href="/lib/global.css">
      </head>
      <body>
        <header>
          <div>
            <img src="/images/logo.png" width="24" height="24" class="pointer" onclick="gotoIndex()" />
            <span class="pointer" onclick="gotoIndex()">左小白的技术日常</span>
            <span class="hidden"> | </span>
            <a href="/blog/category.html#css" class="hidden">css</a>
          </div>
          <div>
            
          <a href="https://www.yuque.com/guoqzuo" target="_black" class="hidden">语雀</a>
        
          <a href="https://space.bilibili.com/486840111" target="_black" class="hidden">B站</a>
        
          <a href="https://github.com/zuoxiaobai" target="_black" class="">Github</a>
        
          </div>
        </header>
        <section class="content">
          <article>
            
    <div class="article-top">
      <div>2020/03/28</div> 
      <div class="article-top-right">Author: guoqzuo</div>
    </div>
  
            <h1 id="网页深色模式样式适配web-dark-mode-support">网页深色模式样式适配(web dark mode support)</h1>
<p>目前iOS，macos都有了深色模式，而最近微信最新版也做了深色模式(dark mode)适配，我试了下，手机切换时页面效果样式是实时刷新的。于是就想着web怎么能够监听深色模式，并设置样式。查了资料后，在Stack Overflow上找到了答案，下面来看看</p>
<p>一般通过css里的媒体查询就能适配深色模式: (prefers-color-scheme: dark)，先来看看怎么用js获取当前是否是深色模式</p>
<h2 id="怎么用js判断当前是否是深色模式">怎么用js判断当前是否是深色模式</h2>
<pre><code class="language-js">// 获取当前是否是深色模式
// window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;).matches
window.matchMedia &amp;&amp; console.log(&#39;Is dark mode: &#39;, window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;).matches)</code></pre>
<h2 id="js实时监听深色模式的切换">js实时监听深色模式的切换</h2>
<pre><code class="language-js">// 用js监听深色模式的切换事件
window.matchMedia &amp;&amp; window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;).addEventListener(&#39;change&#39;, (event) =&gt; {
  console.log(&#39;dark mode change，已&#39; + (event.matches ? &#39;进入&#39;: &#39;退出&#39;) + &#39;dark mode&#39;)
})</code></pre>
<p>window.matchMedia到底是用来做什么的？我查了下mdn，发现了这样一个示例</p>
<pre><code class="language-js">let mql = window.matchMedia(&#39;(max-width: 600px)&#39;);

document.querySelector(&quot;.mq-value&quot;).innerText = mql.matches;</code></pre>
<h2 id="怎么用css媒体查询处理深色模式样式">怎么用css媒体查询处理深色模式样式</h2>
<p>从这个例子看，大概就知道怎么用css来支持dark模式了吧，就是加一个类似小屏适配的一个媒体查询样式，来看个例子</p>
<pre><code class="language-css">/* dark mode support */
@media (prefers-color-scheme: dark) {
  body {
    background-color: black;
    color: #aaa;
  }

  body .content article, header, aside &gt; div, footer  {
    border-color: #333;
    color: #aaa;
    background-color: black;
    box-shadow: 0 0 10px #333;
  }
}</code></pre>
<p>深色模式下，一般将背景调暗，字体设置为偏白色即可。zuo11.com 已用上面的方法适配了深色模式，可以体验下。网站是开源的，<a href="https://github.com/zuoxiaobai/zuo11.com/blob/master/src/global.css">zuo11.com深色模式支持代码 - github</a></p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/56393880/how-do-i-detect-dark-mode-using-javascript">How do I detect dark mode using JavaScript? - Stack Overflow</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia">window.matchMedia | MDN</a></li>
<li><a href="https://developer.apple.com/documentation/xcode/supporting_dark_mode_in_your_interface">Supporting Dark Mode in Your Interface | Apple Developer Documentation</a></li>
</ul>

          </article>
          <aside>
            <div>
              <ul><li><span class="ul-span" data-id="网页深色模式样式适配web-dark-mode-support" style="padding-left:1em">网页深色模式样式适配(web dark mode support)<span></li><ul><li><span class="ul-span" data-id="怎么用js判断当前是否是深色模式" style="padding-left:2em">怎么用js判断当前是否是深色模式<span></li></ul><ul><li><span class="ul-span" data-id="js实时监听深色模式的切换" style="padding-left:2em">js实时监听深色模式的切换<span></li></ul><ul><li><span class="ul-span" data-id="怎么用css媒体查询处理深色模式样式" style="padding-left:2em">怎么用css媒体查询处理深色模式样式<span></li></ul><ul><li><span class="ul-span" data-id="参考" style="padding-left:2em">参考<span></li></ul></ul>
            <div>
          </aside>
        </section>
        <footer>
          <div class="footer_content">
            <div class="footer_right">Copyright © 2016-2020 zuo11.com. <a href='http://www.beian.miit.gov.cn/'>鄂ICP备16014741号-1</a></div>
            <div>Powered by <a href='https://github.com/zuoxiaobai/zuo-blog' target='_black'>zuo-blog</a></div>
          </div>
        </footer>
        <script src="/lib/prismjs/prism_default.js"></script>
        <script src="/lib/notes.js"></script> 
        <script src="/lib/global.js"></script>
        <script>
          
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?183281668cc3440449274d1f93c04de6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    
        </script>
      </body>
    </html>
  