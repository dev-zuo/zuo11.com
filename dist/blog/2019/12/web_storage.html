
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <meta name="application name" content="web_storage.html">
        <meta name="author" content="guoqzuo">
        <meta name="description" content="sessionStorage和localstorage都属于Web Storage，在JS高程3中有讲，这里来回顾下，一般sessionStorage关闭浏览器后会消失，localstorage不会。">
        <meta name="keywords" content="sessionStorage和localstorage的区别">

        <title>sessionStorage和localstorage的区别 - 左小白的技术日常</title>
        <link rel="shortcut icon" href="/images/favicon.ico">
        <link href="/lib/prismjs/prism_default.css" rel="stylesheet" />
        <link href="/lib/notes.css" rel="stylesheet" />
        <link rel="stylesheet" href="/lib/global.css">
        <script data-ad-client="ca-pub-9527676606416641" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      </head>
      <body>
        <header>
          <div>
            <img src="/images/logo.png" width="24" height="24" class="pointer" onclick="gotoIndex()" />
            <span class="pointer" onclick="gotoIndex()">左小白的技术日常</span>
            <span class="hidden"> | </span>
            <a href="/blog/category.html#js" class="hidden">js</a>
          </div>
          <div>
            
          <a href="https://www.yuque.com/guoqzuo" target="_black" class="hidden">语雀</a>
        
          <a href="https://github.com/zuoxiaobai" target="_black" class="">Github</a>
        
          </div>
        </header>
        <section class="content">
          <article>
            
    <div class="article-top">
      <div>2019/12/04</div> 
      <div class="article-top-right">Author: guoqzuo</div>
    </div>
  
            <h1 id="sessionstorage和localstorage的区别">sessionStorage和localstorage的区别</h1>
<p>sessionStorage和localstorage都属于Web Storage，在JS高程3中有讲，这里来回顾下，一般sessionStorage关闭浏览器后会消失，localstorage不会。</p>
<h2 id="web存储机制web-storage">web存储机制(Web Storage)</h2>
<p>Web Storage的目的是克服cookie的限制，当数据需要严格控制在客户端时，无需持续的将数据发回服务器，IE8+支持, Web Storage的两个主要目标是:</p>
<ul>
<li>提供了一种cookie之外存储会话数据的途径</li>
<li>提供了一种存储大量可以跨会话存在的数据机制</li>
</ul>
<h2 id="storage类型">Storage类型</h2>
<p>Storage类型（localStorage、sessionStorage）提供最大的存储空间来存储键值对数据。Storage类型只能存储字符串，非字符串存储前需要转换为字符串。Storage实例与其对象有如下方法:</p>
<pre><code class="language-js">setItem(name, value) // 设置键值对
getItem(name) // 根据指定的名字name获取对应的值，如果没值返回null
removeItem(name) // 删除指定name的值。
clear() // 删除所有值
key(index) // 获取index位置处的key的名称, 可以用来遍历值
lenth // 获取键值对数量
.name // 点语法支持，设置或获取值</code></pre>
<h2 id="sessionstorage">sessionStorage</h2>
<p>sessionStorage数据浏览器关闭后，会消失。主要用于仅针对会话的小段数据存储。2.5M - 5M</p>
<pre><code class="language-js">// MDN
sessionStorage maintains a separate storage area for each given origin that&#39;s available for the duration of the page session (as long as the browser is open, including page reloads and restores)
- Stores data only for a session, meaning that the data is stored until the browser (or tab) is closed.
- Data is never transferred to the server.
- Storage limit is larger than a cookie (at most 5MB).</code></pre>
<h2 id="localstorage">localStorage</h2>
<p>修订过的HTML5规范中，localStorage取代globalStorage，作为持久保存客户端的数据的方案。要访问同一个localStorage对象，页面必须来自同一个域名(子域名无效)。使用同一种协议，同一个端口， 2.5M - 5M，localStorage没有过期时间，如果想要这个功能，那只能自己封装函数来实现了。</p>
<pre><code class="language-js">// MDN
localStorage does the same thing, but persists even when the browser is closed and reopened.
- Stores data with no expiration date, and gets cleared only through JavaScript, or clearing the Browser cache / Locally Stored Data.
- Storage limit is the maximum amongst the three.</code></pre>
<h2 id="storage事件">storage事件</h2>
<pre><code class="language-js">// 单个页面里面storage事件不会触发，需要由其他tab页面触发, 触发的条件：
// - 同一浏览器打开了两个同源页面
// - 其中一个页面修改了localStorage或sessionStorage
// - 另一个网页注册了这个事件
// 参考资料: Storage事件无法触发解决(https://blog.csdn.net/jlin991/article/details/55855524)
window.addEventListener(&#39;storage&#39;, function (event) {
  console.log(&#39;storage chage&#39;);
  console.log(event);
}, false);</code></pre>
<p>参考</p>
<ul>
<li><a href="https://www.yuque.com/guoqzuo/js_es6/sp2k81#sessionStorage">sessionStorage - JS高程3笔记</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage">Window.sessionStorage - Web API 接口参考 | MDN</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage">Window.localStorage - Web API 接口参考 | MDN</a></li>
</ul>

          </article>
          <aside>
            <div>
              <ul><li><span class="ul-span" data-id="sessionstorage和localstorage的区别" style="padding-left:1em">sessionStorage和localstorage的区别<span></li><ul><li><span class="ul-span" data-id="web存储机制web-storage" style="padding-left:2em">web存储机制(Web Storage)<span></li></ul><ul><li><span class="ul-span" data-id="storage类型" style="padding-left:2em">Storage类型<span></li></ul><ul><li><span class="ul-span" data-id="sessionstorage" style="padding-left:2em">sessionStorage<span></li></ul><ul><li><span class="ul-span" data-id="localstorage" style="padding-left:2em">localStorage<span></li></ul><ul><li><span class="ul-span" data-id="storage事件" style="padding-left:2em">storage事件<span></li></ul></ul>
            <div>
          </aside>
        </section>
        <footer>
          <div class="footer_content">
            <div class="footer_right">Copyright © 2016-2020 zuo11.com. <a href='http://www.beian.miit.gov.cn/'>鄂ICP备16014741号-1</a></div>
            <div>Powered by <a href='https://github.com/zuoxiaobai/zuo-blog' target='_black'>zuo-blog</a></div>
          </div>
        </footer>
        <script src="/lib/prismjs/prism_default.js"></script>
        <script src="/lib/notes.js"></script> 
        <script src="/lib/global.js"></script>
        <script>
          
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?183281668cc3440449274d1f93c04de6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178732583-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178732583-1');
</script>

      </body>
    </html>
  